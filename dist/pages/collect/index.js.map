{"version":3,"file":"pages/collect/index.js","sources":["webpack:///./src/pages/collect/index.vue?820c","webpack:///._src_pages_collect_index.vue","webpack:///./src/pages/collect/index.vue?66b1","webpack:///./src/pages/collect/index.vue?b0fa","webpack:///./src/pages/collect/index.vue?4cc0","webpack:///./src/pages/collect/index.vue?fb54","webpack:///./src/pages/collect/index.vue?714e"],"sourcesContent":["import { render } from \"./index.vue?vue&type=template&id=65d3c54e\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=65d3c54e&lang=scss\"\nscript.render = render\n/* hot reload */\nif (module.hot) {\n  script.__hmrId = \"65d3c54e\"\n  const api = __VUE_HMR_RUNTIME__\n  module.hot.accept()\n  if (!api.createRecord('65d3c54e', script)) {\n    api.reload('65d3c54e', script)\n  }\n  \n  module.hot.accept(\"./index.vue?vue&type=template&id=65d3c54e\", () => {\n    api.rerender('65d3c54e', render)\n  })\n\n}\n\nscript.__file = \"src/pages/collect/index.vue\"\n\nexport default script","<template>\r\n  <view class=\"index\">\r\n    <nut-toast\r\n      :msg=\"toast.msg\"\r\n      v-model:visible=\"toast.show\"\r\n      :type=\"toast.type\"\r\n      :cover=\"toast.cover\"\r\n    />\r\n    <nut-cell>\r\n      <view class=\"infiniteUl\">\r\n        <!-- <view v-if=\"myfollow.length>0\"> -->\r\n          <view class=\"infiniteLi\" v-for=\"item in myfollow\" :key=\"item.id\">\r\n            <img\r\n              :src=\"`https://picsum.photos/id/${item.id}/1000`\"\r\n              class=\"resize\"\r\n              @tap=\"toDetail(item.photos_index)\"\r\n            />\r\n            <view>\r\n              {{ item.author }}\r\n              <nut-icon\r\n                name=\"del\"\r\n                class=\"del\"\r\n                @tap=\"delfollow(item.id, item.photos_index)\"\r\n              />\r\n            </view>\r\n          </view>\r\n        </view>\r\n        <!-- <view v-else><nut-cell class=\"empty\">暂无收藏</nut-cell></view> -->\r\n      <!-- </view> -->\r\n    </nut-cell>\r\n  </view>\r\n</template>\r\n<script>\r\nimport { toRefs, reactive, onMounted, computed } from \"vue\";\r\nimport { useStore } from \"vuex\";\r\nimport Taro from \"@tarojs/taro\";\r\nexport default {\r\n  name: \"collect\",\r\n  setup() {\r\n    const store = useStore();\r\n    const state = reactive({\r\n      myfollow: computed(() => store.state.myfollow),\r\n      toast: {\r\n        msg: \"toast\",\r\n        type: \"text\",\r\n        show: false,\r\n        cover: false,\r\n      },\r\n      infiniteloading: {\r\n        isOpenRefresh: false,\r\n        hasMore: true,\r\n      },\r\n    });\r\n    const methods = {\r\n      openToast: (type, msg, cover = false) => {\r\n        state.toast.show = true;\r\n        state.toast.msg = msg;\r\n        state.toast.type = type;\r\n        state.toast.cover = cover;\r\n      },\r\n\r\n      delfollow: (id, index) => {\r\n        store.commit(\"DEL_MYFOLLOW\", { id: id, index: index });\r\n        methods.openToast(\"success\", \"已取消收藏\", false);\r\n      },\r\n\r\n      GoIndex: () => {\r\n        Taro.switchTab({\r\n          url: `/pages/index/index`,\r\n        });\r\n      },\r\n      toDetail: (index) => {\r\n        Taro.navigateTo({\r\n          url: `/pages/detail/index?idx=${index}`,\r\n        });\r\n      },\r\n    };\r\n\r\n    onMounted(() => {\r\n      try {\r\n        let pictures = Taro.getStorageSync(\"pictures\");\r\n        let myfollow = Taro.getStorageSync(\"myfollow\");\r\n        if (pictures) {\r\n          store.commit(\"UPDATE_PICTURE\", JSON.parse(pictures));\r\n        }\r\n        if (myfollow) {\r\n          store.commit(\"UPDATE_MYFOLLOW\", JSON.parse(myfollow));\r\n        }\r\n      } catch (error) {\r\n        methods.openToast(\"fail\", \"同步数据失败\");\r\n        console.log(error.message());\r\n      } finally {\r\n        state.toast.show = false;\r\n      }\r\n      if (state.myfollow.length == 0) methods.openToast(\"text\", \"暂无收藏\", true);\r\n    });\r\n    return {\r\n      ...toRefs(state),\r\n      ...methods,\r\n    };\r\n  },\r\n};\r\n</script>\r\n<style lang=\"scss\">\r\n.index {\r\n  font-family: \"Avenir\", Helvetica, Arial, sans-serif;\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n  text-align: center;\r\n}\r\n.infiniteUl {\r\n  height: 550px;\r\n  width: 100%;\r\n  overflow-y: auto;\r\n  overflow-x: hidden;\r\n}\r\n.infiniteLi {\r\n  margin-top: 10px;\r\n  font-size: 14px;\r\n  color: rgba(100, 100, 100, 1);\r\n  text-align: center;\r\n}\r\n.resize {\r\n  max-width: 100%;\r\n  height: 260px;\r\n  width: 95%;\r\n  margin: 10px;\r\n  border-radius: 8px;\r\n  box-shadow: 0 13px 27px -5px hsl(240deg 30% 28% / 25%),\r\n    0 8px 16px -8px hsl(0deg 0% 0% / 30%), 0 -6px 16px -6px hsl(0deg 0% 0% / 3%);\r\n}\r\n.del {\r\n  left: 30px;\r\n  top: 7px;\r\n}\r\n.empty {\r\n  width: 300px;\r\n  margin: 150px auto;\r\n  text-align: center;\r\n  padding-left: 130px;\r\n}\r\n</style>\r\n","// extracted by mini-css-extract-plugin","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"../../../node_modules/@tarojs/taro-loader/lib/raw.js!./index.vue\"\nvar config = {\"navigationBarTitleText\":\"PHOTOSLIBRARY-我的收藏\"};\n\n\nvar inst = Page(createPageConfig(component, 'pages/collect/index', {root:{cn:[]}}, config || {}))\n\n","export { default } from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/dist/index.js??ref--10-0!./index.vue?vue&type=script&lang=js\"; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/dist/index.js??ref--10-0!./index.vue?vue&type=script&lang=js\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/dist/cjs.js??ref--1-oneOf-0-1!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??ref--1-oneOf-0-2!../../../node_modules/resolve-url-loader/index.js!../../../node_modules/sass-loader/dist/cjs.js??ref--1-oneOf-0-4!../../../node_modules/vue-loader/dist/index.js??ref--10-0!./index.vue?vue&type=style&index=0&id=65d3c54e&lang=scss\"","export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/dist/templateLoader.js??ref--6!../../../node_modules/vue-loader/dist/index.js??ref--10-0!./index.vue?vue&type=template&id=65d3c54e\""],"mappings":";;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAYA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;ACUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AAFA;AARA;AAaA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AADA;AAGA;AAtBA;AAyBA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAIA;AAhEA;;;;;;;;;;;;;;;;;;AAnCA;;;AAQA;;;;;;;;;AARA;AAEA;AACA;;AAAA;AAGA;AAFA;AACA;AACA;;AALA;AAOA;AAAA;AAEA;AAAA;AAAA;AAcA;AAZA;AACA;AACA;AAAA;AAAA;AACA;;AAJA;AAOA;AAKA;AAJA;AACA;AACA;AAAA;AAAA;AACA;;AAJA;AAMA;;AAdA;AAFA;;;;AAoBA;;;;;;;;;;;;AC7BA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACNA;AAAA;AAAA;AAAA;;;;;;;;;;;;ACAA;AAAA;AAAA;;;;;;;;;;;;;;ACAA;AAAA;AAAA;;;;;A","sourceRoot":""}