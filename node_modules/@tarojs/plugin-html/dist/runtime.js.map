{"version":3,"file":"runtime.js","sources":["../src/constant.ts","../src/utils.ts","../src/runtime.ts"],"sourcesContent":["import { isString } from '@tarojs/shared'\n\ninterface SpecialMaps {\n  mapName: string | SpecialMaps.MapNameFn\n  mapNameCondition?: string[]\n  mapAttr?: SpecialMaps.MapAttrFn\n}\n\nexport namespace SpecialMaps {\n  export interface MapNameFn {\n    (props: Record<string, any>): string\n  }\n  export interface MapAttrFn {\n    (key: string, value: any, props: Record<string, any>): [string, any]\n  }\n}\n\nfunction genAttrMapFnFromDir (dir: Record<string, string | [string, Record<string, any>]>): SpecialMaps.MapAttrFn {\n  const fn: SpecialMaps.MapAttrFn = function (key, value) {\n    key = key.toLowerCase()\n    if (key in dir) {\n      const res = dir[key]\n      if (isString(res)) {\n        key = res\n      } else {\n        key = res[0]\n        value = res[1][value] || value\n      }\n    }\n    return [key, value]\n  }\n  return fn\n}\n\nexport const inlineElements = new Set<string>([])\nexport const blockElements = new Set<string>([])\nexport const specialElements = new Map<string, string | SpecialMaps>([\n  ['slot', 'slot'],\n  ['form', 'form'],\n  ['iframe', 'web-view'],\n  ['img', 'image'],\n  ['audio', 'audio'],\n  ['video', 'video'],\n  ['canvas', 'canvas'],\n  ['a', {\n    mapName (props) {\n      return !props.href || (/^javascript/.test(props.href)) ? 'view' : 'navigator'\n    },\n    mapNameCondition: ['href'],\n    mapAttr: genAttrMapFnFromDir({\n      href: 'url',\n      target: ['openType', {\n        _blank: 'navigate',\n        _self: 'redirect'\n      }]\n    })\n  }],\n  ['input', {\n    mapName (props) {\n      if (props.type === 'checkbox') {\n        return 'checkbox'\n      } else if (props.type === 'radio') {\n        return 'radio'\n      }\n      return 'input'\n    },\n    mapNameCondition: ['type'],\n    mapAttr (key, value, props) {\n      key = key.toLowerCase()\n      if (key === 'autofocus') {\n        key = 'focus'\n      } else if (key === 'readonly') {\n        if (props.disabled === true) {\n          value = true\n        }\n        key = 'disabled'\n      } else if (key === 'type') {\n        if (value === 'password') {\n          key = 'password'\n          value = true\n        } else if (value === 'tel') {\n          value = 'number'\n        }\n      }\n      return [key, value]\n    }\n  }],\n  ['label', {\n    mapName: 'label',\n    mapAttr: genAttrMapFnFromDir({\n      htmlfor: 'for'\n    })\n  }],\n  ['textarea', {\n    mapName: 'textarea',\n    mapAttr: genAttrMapFnFromDir({\n      autofocus: 'focus',\n      readonly: 'disabled'\n    })\n  }],\n  ['progress', {\n    mapName: 'progress',\n    mapAttr (key, value, props) {\n      if (key === 'value') {\n        const max = props.max || 1\n        key = 'percent'\n        value = Math.round(value / max * 100)\n      }\n      return [key, value]\n    }\n  }],\n  ['button', {\n    mapName: 'button',\n    mapAttr (key, value) {\n      if (key === 'type' && (value === 'submit' || value === 'reset')) {\n        key = 'formType'\n      }\n      return [key, value]\n    }\n  }]\n])\n","import { isFunction, isString, Shortcuts } from '@tarojs/shared'\nimport {\n  inlineElements,\n  blockElements,\n  specialElements,\n  SpecialMaps\n} from './constant'\n\nexport function isHtmlTags (nodeName: string): boolean {\n  if (inlineElements.has(nodeName) || blockElements.has(nodeName) || specialElements.has(nodeName)) {\n    return true\n  }\n  return false\n}\n\nexport function getMappedType (nodeName: string, rawProps: Record<string, any>): string {\n  if (inlineElements.has(nodeName)) {\n    return 'text'\n  } else if (specialElements.has(nodeName)) {\n    const mapping = specialElements.get(nodeName)!\n    if (isString(mapping)) {\n      return mapping\n    }\n    const { mapName } = mapping\n    return isFunction(mapName) ? mapName(rawProps) : mapName\n  } else {\n    return 'view'\n  }\n}\n\nexport function getAttrMapFn (nodeName): SpecialMaps.MapAttrFn | undefined {\n  const mapping = specialElements.get(nodeName)\n  if (!isString(mapping)) {\n    return mapping?.mapAttr\n  }\n}\n\nfunction getMapNameByCondition (nodeName: string, attr: string, props: Record<string, any>): string | undefined {\n  const mapping = specialElements.get(nodeName)\n  if (!mapping || isString(mapping)) return\n\n  const { mapName, mapNameCondition } = mapping\n  if (!mapNameCondition) return\n\n  if (mapNameCondition.indexOf(attr) > -1 && !isString(mapName)) {\n    return mapName(props)\n  }\n}\n\nexport function mapNameByContion (nodeName: string, key: string, element: any) {\n  const mapName = getMapNameByCondition(nodeName, key, element.props)\n  if (mapName) {\n    element.enqueueUpdate({\n      path: `${element._path}.${Shortcuts.NodeName}`,\n      value: mapName\n    })\n  }\n}\n\nexport function ensureHtmlClass (tagName: string, className = ''): string {\n  const classList = className.split(' ')\n  const htmlClass = `h5-${tagName}`\n  if (classList.indexOf(htmlClass) === -1) {\n    classList.push(htmlClass)\n  }\n  return classList.join(' ')\n}\n\nexport function ensureRect (props: Record<string, any>, style = ''): string {\n  let cssText = style\n  const { width, height } = props\n  if (width) {\n    cssText = `width: ${width};${cssText}`\n  }\n  if (height) {\n    cssText = `height: ${height};${cssText}`\n  }\n  return cssText\n}\n\nexport function defineMappedProp (obj, propName, mapName) {\n  Object.defineProperty(obj, propName, {\n    enumerable: true,\n    configurable: true,\n    get () {\n      return obj[mapName]\n    },\n    set (val) {\n      obj[mapName] = val\n    }\n  })\n}\n","import { mergeReconciler, Shortcuts, warn } from '@tarojs/shared'\nimport {\n  isHtmlTags,\n  getMappedType,\n  getAttrMapFn,\n  ensureHtmlClass,\n  ensureRect,\n  mapNameByContion,\n  defineMappedProp\n} from './utils'\n\nimport type { ModifyHydrateData, ModifyRmAttrPayload, ModifySetAttrPayload, ModifyTaroEvent, OnAddEvent, TaroElement } from '@tarojs/runtime'\n\ninterface IHostConfig {\n  modifyHydrateData: ModifyHydrateData\n  modifySetAttrPayload: ModifySetAttrPayload\n  modifyRmAttrPayload: ModifyRmAttrPayload\n  onAddEvent: OnAddEvent<TaroElement>\n  modifyTaroEvent: ModifyTaroEvent\n}\n\nconst hostConfig: IHostConfig = {\n  modifyHydrateData (data) {\n    const nodeName = data[Shortcuts.NodeName]\n    if (!isHtmlTags(nodeName)) return\n\n    process.env.NODE_ENV !== 'production' && warn(data[Shortcuts.NodeName] === 'select', '请使用 Picker 组件代替 <select>')\n\n    // map nodeName\n    data[Shortcuts.NodeName] = getMappedType(nodeName, data)\n\n    // map attr Key/Value\n    const attrMapFn = getAttrMapFn(nodeName)\n    if (attrMapFn) {\n      for (const key in data) {\n        const value = data[key]\n        const [mapKey, mapValue] = attrMapFn(key, value, data)\n        if (key !== mapKey) {\n          delete data[key]\n          data[mapKey] = mapValue\n        } else if (value !== mapValue) {\n          data[key] = mapValue\n        }\n      }\n    }\n\n    if (nodeName === 'br') {\n      data[Shortcuts.Childnodes] = [{\n        [Shortcuts.NodeName]: '#text',\n        v: '\\n'\n      }]\n    }\n\n    data[Shortcuts.Class] = ensureHtmlClass(nodeName, data[Shortcuts.Class])\n    data[Shortcuts.Style] = ensureRect(data, data[Shortcuts.Style])\n  },\n\n  modifySetAttrPayload (element, key, payload) {\n    const { nodeName, _path, props } = element\n    if (!isHtmlTags(nodeName)) return\n\n    // map nodeName\n    mapNameByContion(nodeName, key, element)\n\n    // map attr Key/Value\n    const attrMapFn = getAttrMapFn(nodeName)\n    if (attrMapFn) {\n      const value = payload.value\n      const [mapKey, mapValue] = attrMapFn(key, value, props)\n      payload.path = `${_path}.${mapKey}`\n      payload.value = mapValue\n    }\n\n    if (key === Shortcuts.Class) {\n      payload.value = ensureHtmlClass(nodeName, payload.value as string)\n    } else if (key === Shortcuts.Style || key === 'width' || key === 'height') {\n      payload.path = `${_path}.${Shortcuts.Style}`\n      payload.value = ensureRect(props, element.style.cssText)\n    }\n  },\n\n  modifyRmAttrPayload (element, key, payload) {\n    const { nodeName, _path, props } = element\n    if (!isHtmlTags(nodeName)) return\n\n    // map nodeName\n    mapNameByContion(nodeName, key, element)\n\n    // map attr Key/Value\n    const attrMapFn = getAttrMapFn(nodeName)\n    if (attrMapFn) {\n      const value = payload[key]\n      const [mapKey] = attrMapFn(key, value, props)\n      payload.path = `${_path}.${mapKey}`\n    }\n\n    if (key === Shortcuts.Class) {\n      payload.value = ensureHtmlClass(nodeName, payload.value as string)\n    } else if (key === Shortcuts.Style || key === 'width' || key === 'height') {\n      payload.path = `${_path}.${Shortcuts.Style}`\n      payload.value = ensureRect(props, element.style.cssText)\n    }\n  },\n\n  onAddEvent (type, _handler, _options, node) {\n    if (!isHtmlTags(node.nodeName)) return\n    if (type === 'click') {\n      defineMappedProp(node.__handlers, type, 'tap')\n    } else if (node.nodeName === 'input') {\n      if (type === 'change') {\n        if (node.props.type === 'checkbox' || node.props.type === 'radio') {\n          defineMappedProp(node.__handlers, type, 'tap')\n        } else {\n          defineMappedProp(node.__handlers, type, 'input')\n        }\n      } else if (type === 'keypress') {\n        defineMappedProp(node.__handlers, type, 'confirm')\n      }\n    }\n  },\n\n  modifyTaroEvent (event, element) {\n    const { nodeName, props } = element\n    if (nodeName === 'input' && event.type === 'tap') {\n      if (props.type === 'checkbox') {\n        props.checked = !props.checked\n      } else if (props.type === 'radio' && !props.checked) {\n        props.checked = true\n      }\n      if (event.mpEvent) {\n        const { currentTarget, target } = event.mpEvent\n        currentTarget.checked = props.checked\n        if (target.id === currentTarget.id) {\n          target.checked = props.checked\n        }\n      }\n    }\n  }\n}\n\nmergeReconciler(hostConfig)\n"],"names":[],"mappings":"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"}